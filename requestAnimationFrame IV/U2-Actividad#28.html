<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>requestAnimationFrame</title>
    <style>
        canvas{
            background-color: white;
            border-color: black;
            border-style:solid;
        }

        body{
          background-color: black;
        }
    </style>
    
</head>
<body>

    <!-- Jose Manuel Benitez Perez 
    Ingeniero en Desarrollo de Software
    ProgramaciÃ³n Avanzada Internet
    Semestre VII, T.V
    -->
    <canvas id="myCanvas" width="700" height="700"></canvas>
    <img src="rotoplas.png" id="imagen" style="display: none;" alt="" >

    <script>
        var canvas = document.getElementById("myCanvas")
        var ctx = canvas.getContext('2d')
       var x = 50, y= 50, dir = 0;

       window.requestAnimationFrame = (function () {
    return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        function (callback) {
            window.setTimeout(callback, 17);
        };
}());

    document.addEventListener("keydown", (e) => {
            console.log(e);

            switch(e.keyCode){
                case 87:
                    dir = 1
                break;
                case 83:
                    dir = 2
                break;
                case 68:
                    dir = 3
                break;
                case 65:
                    dir = 4
                break;
            }
            
        });

function update(){

    switch(dir){
        case 1:
            y-=20;
            break;
            case 2:
                y+=20;
                break;
            case 3:
                x+=20;
                break;
                case 4: 
                x-=20;
                break;
    }
    paint();

window.requestAnimationFrame(update);
}

function paint(){

ctx.fillStyle = "white";
ctx.fillRect(0,0,700,700);

ctx.fillStyle = getRandomColor();
ctx.fillRect(x,y,50,50);

}

 update();

 function getRandomColor() {
 var letters = "0123456789ABCDEF";
  var color = "#";
  for (var i = 0; i < 6; i++) {
  color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}

</script>
</body>
</html>
</script>
</body>
</html>